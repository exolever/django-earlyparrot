sudo: false
dist: xenial
language: python
cache: pip
python:
  - "3.7"
matrix:
  fast_finish: true
services:
- postgresql
- redis-server
addons:
  sonarcloud:
    organization: openexo
install: pip install -r requirements_test.txt
before_script:
- psql -c 'create database travis_ci_test;' -U postgres
script:
- tox
deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  user: __token__
  password:
    secure: zKsGeNSeWsA8Y4ak1AYBgCTaE/3bbBz2+BPezCiW1gYCaKSe8zbmfJKRw4UnxuM072yVUsECAR9GGPZqhTzwiakdf9PAbRqTjbrn7MSvTqC7g9PXApKYpXCLfmncM9HAUiZI/OHM3mOxYAcOxYnF54IeahBG7MHlZIDeXLIVl/sq7VChbPEES56wVS8HNKklcZ5HXTp/qWGKXW8fiPJlM8trq1cU4oZ8AzneoCHDtWHKjlA1xIjP+E0Np3FvW61FJo7lKHNIUZsc2LbfpIn9iQMtxWihkMF3zCz9Is8KWHzIUcaWJyjKG94ZFoW66jrYc8JZhiIDPbhZRE3x9G4CBrSUX1OrUDYmjL/3yx6F6F5qUju1v5sVLAwHcDzOrbBbIyp8VHJ7uF/qD182Cm1wJxWrW1T02HKtAxzbEeJFohRngFwAvG9DBLxqu1fZTfm6R6HkeINET555Hc4CojOFO+gATGmTwI6iLMdUQafgSLnVH4oM3q4IgVJmOcR3jS1IpGgibzPsSmc8csKXD/X/uvuajQVhzX8yceaaxlaS4OGZD4Q2S/kYDKiXENI17BZcxknFqcUC0pr83kEt6oHH+PpwlnR51TdQFr58Ih5LTumQnWFczmP55o1dPmI583vSHJYzqyLkuIZ3dp4KNsNNXNnhP17OtdofulF9M+XS3Rc=
  on:
    tags: true
    repo: exolever/django-earlyparrot
    python: 3.7
after_success:
- codecov
